---
layout: post
title: "[JavaScript] This"
subtitle: "This의 개념"
categories: devlog
tags: javascript CoreJavaScript this call apply bind
---

> This의 개념과 작동 원리입니다.

<!--more-->

- 목차

## 📌 This란?

---

- this는 간단하게 말해서 <b>식별자가 바라봐야할 대상</b>을 의미합니다.
- 이게 무슨 말이지?? 라고 할 수 있겠지만, this는 함수가 호출되어 실행 컨텍스트가 생성되면 결정됩니다.
- 이 때, this는 실행 컨텍스트가 생성되면서 가지게 되는 Lexical Environment(환경 정보들을 모아 놓은 객체)를 가리키게 됩니다.
- 그래서 식별자가 바라봐야할 대상을 의미한다는 것은 this를 가지고 있는 함수가 호출되었을 때 함수 안에 Lexical Environment를 가리키게 되는 것인지, 함수 바깥의 전역 Lexical Environment를 가리키게 되는 것인지에 대한 현상들을 의미합니다.

#### 🎈 갑자기 Lexical Environment?

> 갑자기 왜 Lexical Environment일까?? 다음 예시를 보면 이해가 될 것 같다.

```
var a = 1
console.log(window.a) // a = 1
console.log(this.a) // a = 1

window.a = 3
console.log(a) // a = 3
console.log(this.a) // a = 3
```

> - 앞서 언급했던 'this는 Lexical Environment를 가리킨다'라는 의미를 설명해주는 코드라고 생각한다.
> - var로 a를 선언하게 되면 a라는 변수는 전역 컨텍스트의 Lexical Environment에 저장된다.
> - this가 가리키는 것 또한 Lexical Environment이기 때문에 this.a로 접근이 가능함과 동시에 수정도 가능했던 것이다.

=> 이와같이 this가 전역 내부에 있다면 전역 Lexical Environment를 참조하게 되지만, 만약 함수 내부에서 this를 실행시키면 그 this는 함수가 호출되었을 때 생성된 실행 컨텍스트 Lexical Environment를 가리키게 될것인가? 결론부터 말하면 상황에 따라 다르다. 이제부터 그 상황을 알아보고자 한다.

## 📌 함수 안의 This

---

### 🌱 함수와 메서드의 차이점

- 함수와 메서드를 나눌 수 있는 기준점은 <b>독립성</b>이다.
- 함수는 그 자체로 가지고 있는 동작을 수행하지만, 메서드는 자신을 호출하는 대상 객체에 관한 동작을 수행한다.
- 여기서 포인트는 그 자체로 가지고 있는 동작을 수행하는 것과 함께 자신을 호출하는 대상 객체에 관한 동작을 수행하는 것도 메소드이다.
- 쉽게말해서 함수 앞에 "."! 이 점을 찍냐의 유무에 따라 함수인지 메소드인지 구별할 수 있을 것 같다.

```
var func = function(a) {
    console.log(a)
}

func(1);   ---- (1)

var obj = {
    num: func
}

obj.num(1);  ---- (2)
```

- (1)과 (2)는 그 자체로 사용될 수 있는 함수이다. 여기서 (1)은 자체적으로 선언하지만, (2)는 obj라는 호출 주체를 통해서 함수를 사용했다.
- 이 차이가 (1)은 함수, (2)는 메소드로 구분짓는다.

### 🌱 그래서 함수랑 메소드가 this랑 무슨 상관??

- 함수 내부에 있는 this는 전역을 가리킨다.
- 호출 주체를 함께 명시한 함수(ex. obj.num)의 this는 호출 주체를 가리킨다.

```
var func = function(a) {
    console.log(this, a)
}

func(1);   ---- (1)

var obj = {
    b: 1,
    num: func
}

obj.num(1);  ---- (2)
```

- 위의 코드에서 func의 console.log에 this만 추가시켰다.
- (1)에서의 this는 전역을 가리키게 되지만, (2)에서는 obj를 가리키게 된다. ((2)의 값으로{b: 1, num: func()}이 된다.)
